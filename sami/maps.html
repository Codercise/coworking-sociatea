<!DOCTYPE html>
<html>
  <head>
    <style>
      #map_canvas {
        width: 500px;
        height: 400px;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
		
  </head>
  <body onload="getLocation()">
    <div id="map_canvas"></div>
		<div id="demo">
			
			<script>
				
				var x = document.getElementById("demo");
				var lat;
				var lon;
				var map;
				function getLocation() {
					if (navigator.geolocation) {
						navigator.geolocation.getCurrentPosition(showPosition);
					} else {
						x.innerHTML = "Geolocation is not supported by this browser.";
					}
				}
			
			function showPosition(position) {
				lat = position.coords.latitude;
				lon = position.coords.longitude;
				map.setCenter(new google.maps.LatLng(lat, lon));
			}
			
			function initialize() {
				var map_canvas = document.getElementById('map_canvas');
				
				var map_options = {
					center: new google.maps.LatLng(lat, lon),
					zoom: 8,
					mapTypeId: google.maps.MapTypeId.ROADMAP
				}
				
				map = new google.maps.Map(map_canvas, map_options)
			}
			google.maps.event.addDomListener(window, 'load', initialize);
				</script>
			
			
		</div>
  </body>
</html>